<ng-container *transloco="let t; read: 'auth'">
  <div class="select-company-container relative">
    <!-- Language Switcher -->
    <div class="lang-switch-container">
      <lib-standalone-language-switch [isNested]="false"></lib-standalone-language-switch>
    </div>

    <div class="selection-card-wrapper">
      <erp-card elevation="lg">
        <div card-body>
          <!-- Header Section -->
          <div class="header">
            <div class="brand">
              <i class="pi pi-building brand-icon"></i>
            </div>
            <h1 class="title">{{ t('selectCompany.title') }}</h1>
            <p class="subtitle">{{ t('selectCompany.subtitle') }}</p>
          </div>

          <!-- Selection Form -->
          <form class="selection-form" (ngSubmit)="confirmSelection()">
            <div class="field-container">
              <p-select
                [options]="companies()"
                [(ngModel)]="selectedCompanyId"
                name="company"
                optionLabel="name"
                optionValue="id"
                [filter]="true"
                [placeholder]="t('selectCompany.searchPlaceholder')"
                appendTo="body"
                [style]="{ width: '100%' }"
                class="w-full"
              >
                <ng-template let-company pTemplate="item">
                  <div class="company-option">
                    <i
                      class="pi"
                      [ngClass]="company.logo || 'pi-building'"
                    ></i>
                    <span>{{ company.name }}</span>
                  </div>
                </ng-template>
              </p-select>
            </div>

            <erp-button
              type="submit"
              variant="primary"
              size="lg"
              [fullWidth]="true"
              [disabled]="!selectedCompanyId()"
            >
              {{ t('selectCompany.selectButton') }}
            </erp-button>
          </form>

          <!-- Footer -->
          <div class="footer-actions">
            <p class="back-text">
              <a (click)="backToLogin()" class="back-link">
                <i class="pi pi-arrow-left"></i>
                {{ t('selectCompany.backToLogin') }}
              </a>
            </p>
          </div>
        </div>
      </erp-card>
    </div>
  </div>
</ng-container>
